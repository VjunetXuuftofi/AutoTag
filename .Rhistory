}
data <- read.csv("output.csv")
extract = function (id) {
legit <- c(998356, 998232, 998956, 997331, 996748, 997022, 996082, 999124, 995455, 993810, 993764, 993757, 992994, 993970, 996544, 992516, 992370, 992527, 991868, 993052, 991940, 989604, 990094, 987764, 989302, 988753, 988792, 988407, 987774, 988634, 998356, 996748, 997022, 993764, 992994, 993970, 996544,
100151, 100005, 998432, 999125, 994989, 995340, 994175, 994610, 991313, 988695, 99207, 1000059,
1001490, 998506, 999002, 999137, 995920, 995844, 991521, 992822, 992920, 999207, 997118, 997211, 997125)
if (id %in% legit){
return ("F")
}
else{
return ("T")
}
}
data <- test(data)
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
print(summarized)
summarized <- summarized[with(summarized, order(mean, -n)), ]
forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
'Hekima, a partner of World Relief',
'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
'Partners in Health', 'Kashf Foundation', 'ID Ghana',
'Paglaum Multi-Purpose Cooperative (PMPC)',
'CAURIE Microfinance, a partner of Catholic Relief Services',
'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya')
forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
'Dairy', 'Poultry', 'Clothing')
for (a in 1:1000) {
toremove <- as.character(summarized[a,1])
if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
{
break
}
}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove)
}
return (test(data))
}
data <- test(data)
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
print(summarized)
summarized <- summarized[with(summarized, order(mean, -n)), ]
forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
'Hekima, a partner of World Relief',
'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
'Partners in Health', 'Kashf Foundation', 'ID Ghana',
'Paglaum Multi-Purpose Cooperative (PMPC)',
'CAURIE Microfinance, a partner of Catholic Relief Services',
'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya')
forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
'Dairy', 'Poultry', 'Clothing')
for (a in 1:1000) {
toremove <- as.character(summarized[a,1])
if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
{
break
}
}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
print(summarized)
summarized <- summarized[with(summarized, order(mean, -n)), ]
forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
'Hekima, a partner of World Relief',
'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
'Partners in Health', 'Kashf Foundation', 'ID Ghana',
'Paglaum Multi-Purpose Cooperative (PMPC)',
'CAURIE Microfinance, a partner of Catholic Relief Services',
'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya')
forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
'Dairy', 'Poultry', 'Clothing')
for (a in 1:1000) {
toremove <- as.character(summarized[a,1])
if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
{
break
}
}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
data <- test(data)
mean(data$TRUE.)
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
summarized <- summarized[with(summarized, order(mean, -n)), ]
forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
'Hekima, a partner of World Relief',
'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
'Partners in Health', 'Kashf Foundation', 'ID Ghana',
'Paglaum Multi-Purpose Cooperative (PMPC)',
'CAURIE Microfinance, a partner of Catholic Relief Services',
'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya')
forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
'Dairy', 'Poultry', 'Clothing')
for (a in 1:1000) {
toremove <- as.character(summarized[a,1])
if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
{
break
}
}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
data <- test(data)
mean(data$TRUE.)
data <- test(data)
data <- read.csv("output.csv")
data <- test(data)
'CIDRE', 'MiCredito', 'National Microfinance Bank'
write.csv(data, "newdata.csv")
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
summarized <- summarized[with(summarized, order(mean, -n)), ]
#forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
'Hekima, a partner of World Relief',
'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
'Partners in Health', 'Kashf Foundation', 'ID Ghana',
'Paglaum Multi-Purpose Cooperative (PMPC)',
'CAURIE Microfinance, a partner of Catholic Relief Services',
'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya',
'CIDRE', 'MiCredito', 'National Microfinance Bank')
#forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
'Dairy', 'Poultry', 'Clothing')
#for (a in 1:1000) {
#toremove <- as.character(summarized[a,1])
#if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
#{
#  break
#}
#}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
summarized <- summarized[with(summarized, order(mean, -n)), ]
#forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
'Hekima, a partner of World Relief',
'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
'Partners in Health', 'Kashf Foundation', 'ID Ghana',
'Paglaum Multi-Purpose Cooperative (PMPC)',
'CAURIE Microfinance, a partner of Catholic Relief Services',
'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya',
'CIDRE', 'MiCredito', 'National Microfinance Bank')
#forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
'Dairy', 'Poultry', 'Clothing')
#for (a in 1:1000) {
toremove <- as.character(summarized[a,1])
#if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
#{
#  break
#}
#}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
summarized <- summarized[with(summarized, order(mean, -n)), ]
#forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
#                      'Hekima, a partner of World Relief',
#                      'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
#                      'Partners in Health', 'Kashf Foundation', 'ID Ghana',
#                      'Paglaum Multi-Purpose Cooperative (PMPC)',
#                      'CAURIE Microfinance, a partner of Catholic Relief Services',
#                      'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya',
#                     'CIDRE', 'MiCredito', 'National Microfinance Bank')
#forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
#                        'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
#                        'Dairy', 'Poultry', 'Clothing')
#for (a in 1:1000) {
toremove <- as.character(summarized[a,1])
#if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
#{
#  break
#}
#}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
data <- read.csv("output.csv")
data <- test(data)
test = function(data){
if (mean(data$TRUE.) >= 0.99)
{
return(data)
}
data <- group_by(data, Activity)
summarized <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summarized) <- c("Variable", "mean", "n")
summarized$Variable <- as.character(unlist(lapply(summarized$Variable, change)))
data <- ungroup(data)
data <- group_by(data, Country)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
rbind(summarized, summary2)
data <- ungroup(data)
data <- ungroup(data)
data <- group_by(data, Sector)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, PartnerName)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
data <- group_by(data, husband)
summary2 <- summarise(data, mean = mean(TRUE.), n = n())
colnames(summary2) <- c("Variable", "mean", "n")
summarized <- rbind(summarized, summary2)
data <- ungroup(data)
summarized <- summarized[with(summarized, order(mean, -n)), ]
#forbiddenpartners = c('Cooperativa de Ahorro y Credito Mujeres Unidas (CACMU)',
#                      'Hekima, a partner of World Relief',
#                      'Urwego Opportunity Bank, a partner of Opportunity International and HOPE International',
#                      'Partners in Health', 'Kashf Foundation', 'ID Ghana',
#                      'Paglaum Multi-Purpose Cooperative (PMPC)',
#                      'CAURIE Microfinance, a partner of Catholic Relief Services',
#                      'Ibdaa Microfinance SAL', 'ADIM', 'Fundacion Paraguaya',
#                     'CIDRE', 'MiCredito', 'National Microfinance Bank')
#forbiddenactivities = c('Milk Sales', 'Motorcycle Transport', 'Home Energy',
#                        'Used Shoes', 'Hardware', 'Property', 'Services', 'Bakery',
#                        'Dairy', 'Poultry', 'Clothing')
#for (a in 1:1000) {
toremove <- as.character(summarized[1,1])
#if (!(toremove %in% forbiddenpartners | toremove %in% forbiddenactivities))
#{
#  break
#}
#}
print(toremove)
if (substring(toremove, 1, 1) == "a") {
data <- subset(data, Activity != substring(toremove, 3))
}
else {
data <- subset(data, Sector != toremove & Country != toremove & PartnerName != toremove & husband != toremove)
}
return (test(data))
}
extract = function (id) {
legit <- c(998356, 998232, 998956, 997331, 996748, 997022, 996082, 999124, 995455, 993810, 993764, 993757, 992994, 993970, 996544, 992516, 992370, 992527, 991868, 993052, 991940, 989604, 990094, 987764, 989302, 988753, 988792, 988407, 987774, 988634, 998356, 996748, 997022, 993764, 992994, 993970, 996544,
100151, 100005, 998432, 999125, 994989, 995340, 994175, 994610, 991313, 988695, 99207, 1000059,
1001490, 998506, 999002, 999137, 995920, 995844, 991521, 992822, 992920, 999207, 997118, 997211, 997125)
if (id %in% legit){
return ("F")
}
else{
return ("T")
}
}
data <- read.csv("output.csv")
data <- test(data)
subsetted <- subset(data, TRUE. == 0)
write.csv(data, "newdata.csv")
